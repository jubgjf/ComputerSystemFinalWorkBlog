(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{371:function(t,a,e){"use strict";e.r(a);var s=e(44),v=Object(s.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"第2章-预处理"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#第2章-预处理"}},[t._v("#")]),t._v(" 第2章 预处理")]),t._v(" "),e("h2",{attrs:{id:"预处理的概念与作用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#预处理的概念与作用"}},[t._v("#")]),t._v(" 预处理的概念与作用")]),t._v(" "),e("h3",{attrs:{id:"概念"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#概念"}},[t._v("#")]),t._v(" 概念")]),t._v(" "),e("p",[t._v("在编译之前进行的处理。处理后的结果仍然是文本文件。")]),t._v(" "),e("h3",{attrs:{id:"作用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#作用"}},[t._v("#")]),t._v(" 作用")]),t._v(" "),e("p",[t._v("预处理器根据以字符#开头的命令，如#define，#include，#ifdef等修改原始的 C 程序：")]),t._v(" "),e("ol",[e("li",[t._v("删除#define并展开所有宏")]),t._v(" "),e("li",[t._v("递归插入头文件到#include处")]),t._v(" "),e("li",[t._v("处理所有条件编译，如#if，#ifdef等")]),t._v(" "),e("li",[t._v("删除所有注释")]),t._v(" "),e("li",[t._v("添加行号和文件名标识，以便编译时编译器产生调试用的行号")])]),t._v(" "),e("p",[t._v("注意到预处理会保留所有#pragma指令，以指导编译器操作。")]),t._v(" "),e("h2",{attrs:{id:"在ubuntu下预处理的命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#在ubuntu下预处理的命令"}},[t._v("#")]),t._v(" 在Ubuntu下预处理的命令")]),t._v(" "),e("p",[t._v("可以用cpp或gcc -E来进行预处理，下图中选择使用gcc -E hello.c -o hello.i进行预处理")]),t._v(" "),e("p",[e("img",{attrs:{src:"image003.png",alt:"图 2 预处理命令"}})]),t._v(" "),e("p",[t._v("预处理后生成的文件最后几行如下")]),t._v(" "),e("p",[e("img",{attrs:{src:"image004.png",alt:"图 3 预处理结果示例"}})]),t._v(" "),e("h2",{attrs:{id:"hello的预处理结果解析"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#hello的预处理结果解析"}},[t._v("#")]),t._v(" Hello的预处理结果解析")]),t._v(" "),e("p",[t._v("如图 3 预处理结果示例所示，整个hello.c被扩充到了3060行。")]),t._v(" "),e("p",[t._v("原hello.c如下")]),t._v(" "),e("p",[e("img",{attrs:{src:"image005.png",alt:"图 4 hello.c源代码"}})]),t._v(" "),e("p",[t._v("可见hello.c中导入了3个头文件，即stdio.h，unistd.h，stdlib.h。在预处理阶段，这三行被替换成了三个头文件的原始代码。")]),t._v(" "),e("p",[t._v("为了验证预处理替换的正确性，尝试在hello.i中搜索#include，#define，#if等指令，如下图")]),t._v(" "),e("p",[e("img",{attrs:{src:"image006.png",alt:"图 5 搜索#define"}})]),t._v(" "),e("p",[e("img",{attrs:{src:"image007.png",alt:"图 6 搜索#if"}})]),t._v(" "),e("p",[t._v("然而都没有搜索到，如下图")]),t._v(" "),e("p",[e("img",{attrs:{src:"image008.png",alt:"图 7 搜索失败"}})]),t._v(" "),e("p",[t._v("证明了预处理阶段替换了所有的#include，#define，#if等指令。")]),t._v(" "),e("h2",{attrs:{id:"本章小结"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#本章小结"}},[t._v("#")]),t._v(" 本章小结")]),t._v(" "),e("p",[t._v("本章对hello.c进行预处理操作，获得hello.i文件，结合预处理的概念及作用分析了预处理对文本.c文件的相应处理，并对结果进行了相应的解析。")])])}),[],!1,null,null,null);a.default=v.exports}}]);